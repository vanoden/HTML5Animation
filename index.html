<html>
<head>
    <title>Tony's Animation Test</title>
    <script src="animation.js" type="application/javascript"></script>
    <script type="application/javascript">
        var frame;
		const colors = ["red","yellow","blue","brown","purple","orange"];

        window.addEventListener('load', (event) => {
            console.log('page is fully loaded');

			// Initialize Game Frame
            var frame_elem = document.getElementById('animationFrame');
            frame = Object.create(Frame);
            frame.init(document.getElementById('animationFrame'));
			frame.cannon.angle = 45;

			// Add Balls to Game Frame
			for (var i = 0; i < 5; i++) {
	            let ball = Object.create(Sprite);
            	ball.begin((Math.random()*frame.width),5,1+i,15);
            	ball.color = colors[parseInt(Math.random()*6)];
				ball.weight = 0.02;
				ball.radius = 12 + Math.random()*20;
        	    frame.addSprite(ball);
			}

			// Start the Game
            frame.go();
        });

		// Listen for mouse clicks
		document.addEventListener('click', function(event) {
			const x = event.clientX;
			const y = event.clientY;

			console.log('Mouse clicked at:', x, y);
		});

		// Listen for Keyboard Events
		document.addEventListener(
			'keyup',
			event => {
				if (event.code === 'Space') {
					const mouseX = event.clientX;
					const mouseY = event.clientY;
					const angle = mouseY/mouseX;
					console.log('Space key pressed');
					console.log('mouseX: ' + mouseX);
					console.log('mouseY: ' + mouseY);

					// Fire a shot!
					bullet = Object.create(Sprite);
					bullet.begin(frame.cannon.nozzleX(),frame.cannon.nozzleY(),frame.cannon.xComp()/2,frame.cannon.yComp()/2);
					bullet.weight = 0.025;
					bullet.color = 'black';
					bullet.restrain = false;
					bullet.radius = 5;
					bullet.type = 'bullet';
					frame.addSprite(bullet);
					frame.bulletCount--;
				}
				else if (event.code === 'ArrowLeft') {
					console.log('ArrowLeft key pressed');
					frame.cannon.angle += 5;
					if (frame.cannon.angle >= 359) {
						frame.cannon.angle = 359;
					}
					console.log('cannonAngle: ' + frame.cannon.angle);
				}
				else if (event.code === 'ArrowRight') {
					console.log('ArrowRight key pressed');
					frame.cannon.angle -= 5;
					if (frame.cannon.angle < 0) {
						frame.cannon.angle = 0;
					}
					console.log('cannonAngle: ' + frame.cannon.angle);
				}
				else {
					console.log('Unknown key pressed');
				}
			}
		)

    </script>
    <style>
        #animationFrame {
            border: 1px solid red;
        }
    </style>
</head>
<body>
<canvas id="animationFrame" width="1200px" height="960px"></canvas>
</body>
</html>